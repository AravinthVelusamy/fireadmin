{"version":3,"sources":["fireadmin.js"],"names":[],"mappings":"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","file":"fireadmin.js","sourcesContent":["(function (global, factory) {\n\ttypeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory(require('firebase'), require('lodash')) :\n\ttypeof define === 'function' && define.amd ? define(['firebase', 'lodash'], factory) :\n\tglobal.Fireadmin = factory(global.Firebase,global._);\n}(this, function (Firebase,_) { 'use strict';\n\n\tFirebase = 'default' in Firebase ? Firebase['default'] : Firebase;\n\t_ = 'default' in _ ? _['default'] : _;\n\n\tlet config = {\n\t};\n\n\t//Set default log level to debug\n\tlet logLevel = 'debug';\n\t//Set log level from config\n\tif (config.logLevel) {\n\t\tlogLevel = config.logLevel;\n\t}\n\n\tlet logger = {\n\t\tlog(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\trunConsoleMethod('log', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('log', msgArgs);\n\t\t\t}\n\t\t},\n\t\tinfo(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\trunConsoleMethod('info', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('info', msgArgs);\n\t\t\t}\n\t\t},\n\t\twarn(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\trunConsoleMethod('warn', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('warn', msgArgs);\n\t\t\t}\n\t\t},\n\t\tdebug(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\t// runConsoleMethod('debug', msgArgs);\n\t\t\t\t//Do not display console debugs in production\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('debug', msgArgs);\n\t\t\t}\n\t\t},\n\t\terror(logData) {\n\t\t\tlet msgArgs = buildMessageArgs(logData);\n\t\t\tif (config.envName == 'production') {\n\t\t\t\t//TODO: Log to external logger\n\t\t\t\trunConsoleMethod('error', msgArgs);\n\t\t\t} else {\n\t\t\t\trunConsoleMethod('error', msgArgs);\n\t\t\t}\n\t\t}\n\t};\n\n\tfunction runConsoleMethod(methodName, methodData) {\n\t\t//Safley run console methods or use console log\n\t\tif (methodName && console[methodName]) {\n\t\t\treturn console[methodName].apply(console, methodData);\n\t\t} else {\n\t\t\treturn console.log.apply(console, methodData);\n\t\t}\n\t}\n\tfunction buildMessageArgs(logData) {\n\t\tvar msgStr = '';\n\t\tvar msgObj = {};\n\t\t//TODO: Attach time stamp\n\t\t//Attach location information to the beginning of message\n\t\tif (_.isObject(logData)) {\n\t\t\tif (logLevel == 'debug') {\n\t\t\t\tif (_.has(logData, 'func')) {\n\t\t\t\t\tif (_.has(logData, 'obj')) {\n\t\t\t\t\t\t//Object and function provided\n\t\t\t\t\t\tmsgStr += `[${logData.obj}.${logData.func}()]\\n `;\n\t\t\t\t\t} else if (_.has(logData, 'file')) {\n\t\t\t\t\t\tmsgStr += `[${logData.file} > ${logData.func}()]\\n `;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tmsgStr += `[${logData.func}()]\\n `;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t//Print each key and its value other than obj and func\n\t\t\t_.each(_.omit(_.keys(logData)), (key, ind, list) => {\n\t\t\t\tif (key != 'func' && key != 'obj') {\n\t\t\t\t\tif (key == 'description' || key == 'message') {\n\t\t\t\t\t\tmsgStr += logData[key];\n\t\t\t\t\t} else if (_.isString(logData[key])) {\n\t\t\t\t\t\t// msgStr += key + ': ' + logData[key] + ', ';\n\t\t\t\t\t\tmsgObj[key] = logData[key];\n\t\t\t\t\t} else {\n\t\t\t\t\t\t//Print objects differently\n\t\t\t\t\t\t// msgStr += key + ': ' + logData[key] + ', ';\n\t\t\t\t\t\tmsgObj[key] = logData[key];\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t});\n\t\t\tmsgStr += '\\n';\n\t\t} else if (_.isString(logData)) {\n\t\t\tmsgStr = logData;\n\t\t}\n\t\tvar msg = [msgStr, msgObj];\n\n\t\treturn msg;\n\t}\n\n\tclass Fireadmin {\n\t\t/* Constructor\n\t\t * @param {string} appName Name of application\n\t\t */\n\t\tconstructor(url, opts) {\n\t\t\tif (!url) {\n\t\t\t\tlogger.error({description: 'Application name requires to use Fireadmin.', func: 'constructor', obj: 'Fireadmin'});\n\t\t\t\tthrow new Error('Application name is required to use Fireadmin');\n\t\t\t} else {\n\t\t\t\tthis.ref = new Firebase(url);\n\t\t\t\tthis.fbUrl = url;\n\t\t\t\tthis.appName = AppNameFromUrl(url);\n\t\t\t}\n\t\t\tif (opts) {\n\t\t\t\tthis.options = opts;\n\t\t\t}\n\t\t}\n\t\tget auth() {\n\t\t\treturn this.ref.getAuth();\n\t\t}\n\t\tget isAuthorized() {\n\t\t\treturn !this.auth || this.auth === null;\n\t\t}\n\t\t/**\n\t  * This callback is displayed as part of the Requester class.\n\t  * @callback Fireadmin~errorCb\n\t  * @param {String} code\n\t  * @param {String} message\n\t  */\n\t  /**\n\t   * Creates an object provided the name of the list the object will go into and the object itthis.\n\t   * The object is created with a createdAt parameter that is a server timestamp from Firebase.\n\t   * If a user is currently signed in, the object will contain the author's `$uid` under the author parameter.\n\t   * @param {String} listName - The name of the list the object will be put into. `Required`\n\t   * @param {Object} objectData - Data you wish to be contained within new object. `Required`\n\t   * @param {Function} onSuccess - Function that runs when your object has been created successfully and returns newly created object. `Optional`\n\t   * @param {Function} onError - Function that runs if there is an error creating the object. `Optional`\n\t   * @example\n\t   * //creates new message object in message list\n\t   * fa.createObject('messages', {title:Example, content:'Cool Message'}, ).then(function(newMsg){\n\t   *  logger.log('New Message created successfuly:', newMsg);\n\t   * }, function(err){\n\t   *  logger.error('Error creating new message:', err);\n\t   * });\n\t   */\n\t\tcreateObject(listName, obj) {\n\t    var auth = this.ref.getAuth();\n\t    if (auth) {\n\t      obj.author = auth.uid;\n\t    }\n\t    obj.createdAt = Date.now();\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.ref.child(listName).push(obj, (err) => {\n\t\t      if (!err) {\n\t\t\t\t\t\treturn resolve(obj);\n\t\t      } else {\n\t\t\t\t\t\treturn reject(err);\n\t\t      }\n\t\t    });\n\t\t\t});\n\t  }\n\t\t/**\n\t\t * Gets list of objects created by the currently logged in User.\n\t\t * @param {String | Array} listPath -  The name or path of the list the objects will be grabbed from. `Required`\n\t\t * @param {String} Uid - The Uid of the user that created objects. `Required`\n\t\t * @param {Function} onSuccess - Function that runs when the list has been retrieved successfully. `Optional`\n\t\t * @param {Fireadmin~errorCb} onError -  Function that runs if there is an error. `Optional`\n\t\t * @example\n\t\t * // Signin User with email and password\n\t\t * var uid = 'simplelogin:1';\n\t\t * fb.listByUid('messages', uid, function(messageList){\n\t\t *  logger.log('List of messages by ' + uid + ' : ', messageList);\n\t\t * }, function(err){\n\t\t *  logger.error('Error getting message list:', err);\n\t\t * });\n\t\t */\n\t\tlistByCurrentUser(listName) {\n\t\t\tif (!listName) {\n\t\t\t\treturn Promise.reject({message: 'Listname required to list objects.'});\n\t\t\t}\n\t    if (this.isAuthorized) {\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tlet authorObjQuery = this.ref.child(listName).orderByChild('author').equalTo(auth.uid);\n\t\t\t\t\tauthorObjQuery.on('value', (listSnap) => {\n\t\t\t\t\t\treturn resolve(listSnap.val());\n\t\t\t\t\t}, (err) => {\n\t\t\t\t\t\treturn reject(err);\n\t\t\t\t\t});\n\t\t\t\t});\n\t    } else {\n\t      var error = {code: 'INVALID_AUTH', message: 'listByCurrentUser cannot load list without current user'};\n\t      logger.error(error.message);\n\t\t\t\treturn Promise.reject(error);\n\t    }\n\t\t}\n\t\t/**\n\t\t * Gets list of objects created by the currently logged in User.\n\t\t * @param {String | Array} listPath -  The name or path of the list the objects will be grabbed from. `Required`\n\t\t * @param {String} Uid - The Uid of the user that created objects. `Required`\n\t\t * @param {Function} onSuccess - Function that runs when the list has been retrieved successfully. `Optional`\n\t\t * @param {Fireadmin~errorCb} onError -  Function that runs if there is an error. `Optional`\n\t\t * @example\n\t\t * // Signin User with email and password\n\t\t * var uid = 'simplelogin:1';\n\t\t * fb.listByUid('messages', uid, function(messageList){\n\t\t *  logger.log('List of messages by ' + uid + ' : ', messageList);\n\t\t * }, function(err){\n\t\t *  logger.error('Error getting message list:', err);\n\t\t * });\n\t\t */\n\t\tlistByUid(listPath, uid) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.fbRef(listPath).orderByChild('author').equalTo(uid).on('value', (listSnap) => {\n\t\t\t\t\treturn Promise.resolve(listSnap.val());\n\t\t\t\t}, (err) => {\n\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t\t/**\n\t   * Get total user count\n\t   * @param {Function} onSuccess - Function that returns total user count. `Optional`\n\t   * @param {Fireadmin~errorCb} onError - Function that runs if there is an error. `Optional`\n\t   * @example\n\t   * fa.getUserCount('users', function(count){\n\t   *  logger.log('There are is a total of ' + count + ' users.');\n\t   * });\n\t   */\n\t  getUserCount() {\n\t    return new Promise((resolve, reject) => {\n\t\t\t\tthis.ref.child('users').on('value', (usersListSnap) => {\n\t\t\t\t\tresolve(usersListSnap.numChildren());\n\t\t    }, (err) => {\n\t\t\t\t\tlogger.error({description: 'Error getting user count.', func: 'getUserCount', obj: 'Fireadmin'});\n\t\t\t\t\treject(err);\n\t\t    });\n\t\t\t});\n\t  }\n\t  /** Get the number of users that are currently online.\n\t   * @memberOf Fireadmin#\n\t   * @param {Function} onSuccess - Function that returns number of users currently online. `Optional`\n\t   * @param {Fireadmin~errorCb} onError - Function that runs if there is an error. `Optional`\n\t   * @example\n\t   * fa.getOnlineUserCount(function(count){\n\t   *   logger.log('There are ' + count + ' users currently online.');\n\t   * });\n\t   *\n\t   */\n\t  getOnlineUserCount() {\n\t    return new Promise((resolve, reject) => {\n\t\t\t\tthis.ref.child('presence').on('value', (onlineUserSnap) => {\n\t\t\t\t\tlogger.log('There are currently' + onlineUserSnap.numChildren() + ' users online.');\n\t\t\t\t\tresolve(onlineUserSnap.numChildren());\n\t\t\t\t}, (err) => {\n\t\t\t\t\treject(err);\n\t\t\t\t});\n\t\t\t});\n\t  }\n\t  /**\n\t   * Get the number of sessions between two times\n\t   * @param {Number} startTime - The time at which to start the between period (in UTC ms). `Required`\n\t   * @param {Number} endTime - The time at which to start the between period (in UTC ms). `Required`\n\t   * @param {Function} onSuccess - Function that runs on completion of gathering list count. `Optional`\n\t   * @param {Fireadmin~errorCb} onError - Function that runs if there is an error. `Optional`\n\t   * @example\n\t   * //String list name\n\t   * fa.getObjectCount('users', function(count){\n\t   *  logger.log('There are ' + count + ' users');\n\t   * });\n\t   */\n\t  sessionsBetween(time1, time2) {\n\t    logger.log({description: 'Sessions between called.', startTime: time1, endTime: time2, func: 'sessionsBetween', obj: 'Fireadmin'});\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.ref.child('sessions').orderByChild('ended').startAt(time1).endAt(time2).on('value', (sessionsSnap) => {\n\t\t\t\t\tresolve(sessionsSnap.numChildren());\n\t\t\t\t}, (err) => {\n\t\t\t\t\tlogger.error({description: 'Error getting sessions between specified times.', error: err, func: 'sessionsBetween', obj: 'Fireadmin'});\n\t\t\t\t\treject({message: 'Error getting sessions.'});\n\t\t\t\t});\n\t\t\t});\n\n\t  }\n\t  /**\n\t   * Get the number of sessions since a specific time\n\t   * @param {String} time - The UTC time to calculate from.\n\t   * @param {Function} onSuccess - Function that runs on completion of gathering list count. `Optional`\n\t   * @param {Fireadmin~errorCb} onError - Function that runs if there is an error. `Optional`\n\t   * @example\n\t   * var dt = new Date(); //Create a new Data object\n\t   * dt.setMonth(dt.getMonth()-1); //Set date back a month\n\t   * var monthAgo = dt.getTime(); //Convert to UTC time\n\t   * //Get number of sessions since a month ago\n\t   * fa.sessionsSince(monthAgo, function(count){\n\t   *  logger.log('There are ' + count + ' sessions in the past month');\n\t   * });\n\t   */\n\t  sessionsSince(time) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.ref.child('sessions').orderByChild('ended').startAt(time).endAt(Date.now()).on('value', (sessionsSnap) => {\n\t\t\t\t\treturn resolve(sessionsSnap.numChildren());\n\t\t\t\t}, (err) => {\n\t\t\t\t\tlogger.error({description: 'Error getting sessions between specified times.', error: err, func: 'sessionsSince', obj: 'Fireadmin'});\n\t\t\t\t\treturn reject(err);\n\t\t\t\t});\n\t\t\t});\n\t  }\n\t  /**\n\t   * Get count of objects in a given path or list\n\t   * @param {Function} onSuccess - Function that runs on completion of gathering average session length. `Optional`\n\t   * @param {Fireadmin~errorCb} onError - Function that runs if there is an error. `Optional`\n\t   * @example\n\t   * //Get the average session length\n\t   * fa.averageSessionLength(function(count){\n\t   *  logger.log('The average session length is ~' + count ' mins');\n\t   * });\n\t   */\n\t  averageSessionLength() {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.ref.child('sessions').on('value', (sessionsSnap) => {\n\t\t      var totalLength = null;\n\t\t      var sessionCount = sessionsSnap.numChildren();\n\t\t      sessionsSnap.forEach((sessionSnap) => {\n\t\t        var session = sessionSnap.val();\n\t\t        if (session.hasOwnProperty('ended') && session.hasOwnProperty('began')) {\n\t\t          //Gather length of session\n\t\t          // Convert difference in ms to minutes\n\t\t\t\t\t\t\tvar conversion = (session.ended - session.began) / (1000 * 60) ;\n\t\t          totalLength = totalLength + conversion;\n\t\t          logger.log('total length is now:', totalLength);\n\t\t        } else {\n\t\t          logger.log('removing unfinished session:', sessionSnap.val());\n\t\t          sessionCount--;\n\t\t          logger.log('session count:', sessionCount);\n\t\t        }\n\t\t      });\n\t\t      logger.log('totalLength:', totalLength);\n\t\t      var average = Math.floor(totalLength / sessionCount);\n\t\t      logger.log('average in minutes:', average);\n\t\t\t\t\treturn resolve(average);\n\t\t    }, (err) => {\n\t\t\t\t\treturn reject(err);\n\t\t    });\n\t\t\t});\n\n\t  }\n\t  removeUserSessions(uid) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.ref.child('sessions').orderByChild('user').equalTo(uid).on('value', (sessionsSnap) => {\n\t\t     var sessionCount = sessionsSnap.numChildren();\n\t\t      sessionsSnap.forEach((session) => {\n\t\t        session.ref().remove();\n\t\t      });\n\t\t      logger.log(sessionCount + ' Sessions sucessfully removed');\n\t\t\t\t\treturn resolve();\n\t\t    }, (err) => {\n\t\t\t\t\treturn reject(err);\n\t\t    });\n\t\t\t});\n\t  }\n\t  customAuthToken(img) {\n\t    //Send file to server\n\t    var fa = this;\n\t    var reqData = {appName: fa.appName};\n\t    apiRequest('auth', reqData, (res) => {\n\t      if (res.hasOwnProperty('token')) {\n\t        logger.log('auth request response:', res);\n\t\t\t\t\treturn Promise.resolve(res);\n\t      } else {\n\t\t\t\t\treturn Promise.reject({code: 'SERVER_ERROR'});\n\t      }\n\t    }, (err) => {\n\t\t\t\treturn Promise.reject(err);\n\t    });\n\t  }\n\t  /** Modified version of Firebase's authWithPassword that handles presence\n\t   * @memberOf Fireadmin#\n\t   * @param {Object | String} loginData - Login data object or string for 3rd Party Signup (Twitter, Github, Google) `Required`\n\t   * @param {Object} loginData.email - Email of new user (`Required` only for email signup).\n\t   * @param {Function} onSuccess Function that runs when the user is successfully authenticated with presence enabled. `Optional`\n\t   * @param {Fireadmin~errorCb} onError Function that runs if there is an error. `Optional`\n\t   * @example\n\t   * // Signin User with email and password\n\t   * fb.userSignup({email:test@test.com, password:'testtest'}, function(auth){\n\t   *  logger.log('Login Successful for user:', auth.uid);\n\t   * }, function(err){\n\t   *  logger.error('Error logging in:', err);\n\t   * });\n\t   */\n\t  userSignup(signupData) {\n\t    if (typeof signupData === 'object' && signupData.hasOwnProperty('email')) {\n\t      //Email signup\n\t      if (!signupData.hasOwnProperty('password') && signupData.password.length <= 8) {\n\t        return handleCb(errorCb,{message: 'A valid Password is required to signup.'});\n\t      }\n\t      //Create new user in simple login\n\t\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\t\tthis.createUser(signupData, (error) => {\n\t\t        if (error === null) {\n\t\t          logger.log('[emailSignup] User created successfully. Logging in as new user...');\n\t\t            // Login with new account\n\t\t            this.emailAuth(signupData, (authData) => {\n\t\t              //Create new user profile\n\t\t              createUserProfile(authData, this.ref, (userAccount) => {\n\t\t\t\t\t\t\t\t\t\tresolve(userAccount);\n\t\t              }, (err) => {\n\t\t                //Error creating profile\n\t\t\t\t\t\t\t\t\t\treject(err);\n\t\t              });\n\t\t            }, (err) => {\n\t\t              //Error authing with email\n\t\t\t\t\t\t\t\t\treject(err);\n\t\t            });\n\t\t        } else {\n\t\t          //Error creating new User\n\t\t          logger.error('[emailSignup] Error creating user:', error.message);\n\t\t\t\t\t\t\treject(error);\n\t\t        }\n\t\t      });\n\t\t\t\t});\n\t    } else if (signupData.hasOwnProperty('type') && signupData.type == 'username') {\n\t      //[TODO] User signup with with custom auth token with username as uid\n\t      //Username signup\n\t      //request a signup with username as uid\n\t      apiRequest('signup', signupData, (res) => {\n\t        logger.log('request for token successful:', res);\n\t        return this.authWithCustomToken(res.token, (err, authData) => {\n\t          if (err) {\n\t\t\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t\t\t}\n\t          return createUserProfile(authData, this.ref, (userAccount) => {\n\t\t\t\t\t\t\treturn Promise.resolve(userAccount);\n\t          }, (err) => {\n\t            //Error creating profile\n\t\t\t\t\t\t\treturn Promise.reject(err);\n\t          });\n\t        });\n\t      }, (err) => {\n\t\t\t\t\treturn Promise.reject(err);\n\t      });\n\t    } else if (typeof signupData == 'string' || signupData.hasOwnProperty('type')) {\n\t      //3rd Party Signup\n\t\t\t\tlet provider = typeof signupData === 'string' ? signupData : signupData.type;\n\t      // Auth using 3rd party OAuth\n\t      return this.authWithOAuthPopup(provider, (err, authData) => {\n\t\t\t\t\tif (err) {\n\t\t\t\t\t\treturn Promise.reject(err);\n\t\t\t\t\t}\n\t        //Create new profile with user data\n\t        return createUserProfile(authData, this.ref, (userAccount) => {\n\t\t\t\t\t\treturn Promise.resolve(userAccount);\n\t        }, (err) => {\n\t          //Error creating profile\n\t\t\t\t\t\treturn Promise.reject(err);\n\t        });\n\t      });\n\t    }\n\t  }\n\n\t  /** Modified version of Firebase's authWithPassword that handles presence\n\t   * @memberOf Fireadmin#\n\t   * @param {Object} loginData Login data of new user\n\t   * @param {Function} onSuccess Function that runs when the user is successfully authenticated with presence enabled. `Optional`\n\t   * @param {Fireadmin~errorCb} onError Function that runs if there is an error. `Optional`\n\t   * @example\n\t   * // Signin User with email and password\n\t   * fb.emailAuth({email:test@test.com, password:'testtest'}, function(auth){\n\t   *  logger.log('Login Successful for user:', auth.uid);\n\t   * }, function(err){\n\t   *  logger.error('Error logging in:', err);\n\t   * });\n\t   */\n\t  emailAuth(loginData) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.ref.authWithPassword(loginData, (error, authData) => {\n\t\t      if (error === null) {\n\t\t        // user authenticated with Firebase\n\t\t        logger.log({description: 'Successfully authed.', authData: authData, userId: authData.uid, provider: authData.provider, func: 'emailAuth', obj: 'Fireadmin'});\n\t\t        // Manage presence\n\t\t        this.setupPresence(authData.uid);\n\t\t        // [TODO] Check for account/Add account if it doesn't already exist\n\t\t\t\t\t\treturn resolve(authData);\n\t\t      } else {\n\t\t        logger.error('Error authenticating user:', error);\n\t\t\t\t\t\treturn reject(err);\n\t\t      }\n\t\t    });\n\t\t\t});\n\t  }\n\t  /** Modified version of Firebase's authWithOAuthPopup function that handles presence\n\t   * @memberOf Fireadmin#\n\t   * @param {String} provider - Login data of new user. `Required`\n\t   * @param {Function} onSuccess - Function that runs when the user is successfully authenticated with presence enabled. `Optional`\n\t   * @param {Fireadmin~errorCb} onError - Function that runs if there is an error. `Optional`\n\t   * @example\n\t   * // Signin User with email and password\n\t   * fb.authWithOAuthPopup('google', function(auth){\n\t   *  logger.log('Login Successful for user:', auth.uid);\n\t   * }, function(err){\n\t   *  logger.error('Error logging in:', err);\n\t   * });\n\t   */\n\t  authWithOAuthPopup(provider) {\n\t    //[TODO] Check enabled login types\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.ref.authWithOAuthPopup(provider, (error, authData) => {\n\t\t      if (error === null) {\n\t\t        // user authenticated with Firebase\n\t\t        logger.log({description: 'Auth popup responded.', authData: authData, id: authData.uid, provider: authData.provider, func: 'authWithOAuthPopup', obj: 'Fireadmin'});\n\t\t        // Manage presence\n\t\t        this.setupPresence(authData.uid);\n\t\t        // [TODO] Check for account/Add account if it doesn't already exist\n\t\t\t\t\t\treturn resolve(authData);\n\t\t      } else {\n\t\t        logger.error('Error authenticating user:', error);\n\t\t\t\t\t\treturn reject(error);\n\t\t      }\n\t\t    });\n\t\t\t});\n\n\t  }\n\t  newUserFromAnonyomous() {\n\n\t  }\n\t  /** Log in with Github through OAuth\n\t   * @memberOf Fireadmin#\n\t   * @param {Function} onSuccess - Function that runs when the user is successfully authenticated with presence enabled. `Optional`\n\t   * @param {Fireadmin~errorCb} onError - Function that runs if there is an error. `Optional`\n\t   * @example\n\t   * // Signin User with email and password\n\t   * fb.githubAuth(function(auth){\n\t   *  logger.log('Login Successful for user:', auth.uid);\n\t   * }, function(err){\n\t   *  logger.error('Error logging in:', err);\n\t   * });\n\t   */\n\t  githubAuth() {\n\t    return this.authWithOAuthPopup('github');\n\t  }\n\t  /** Modified version of Firebase's authWithPassword that handles presence\n\t   * @memberOf Fireadmin#\n\t   * @param {Function} onSuccess Function that runs when the user is successfully authenticated with presence enabled. `Optional`\n\t   * @param {Fireadmin~errorCb} onError Function that runs if there is an error. `Optional`\n\t   * @example\n\t   * // Signin User with email and password\n\t   * fb.githubAuth(function(auth){\n\t   *  logger.log('Login Successful for user:', auth.uid);\n\t   * }, function(err){\n\t   *  logger.error('Error logging in:', err);\n\t   * });\n\t   */\n\t  googleAuth() {\n\t    return this.authWithOAuthPopup('google');\n\t  }\n\t  /** Modified version of Firebase's authWithPassword that handles presence\n\t   * @memberOf Fireadmin#\n\t   * @param {Function} onSuccess Function that runs when the user is successfully authenticated with presence enabled. `Optional`\n\t   * @param {Fireadmin~errorCb} onError Function that runs if there is an error. `Optional`\n\t   * @example\n\t   * // Signin User with email and password\n\t   * fb.githubAuth(function(auth){\n\t   *  logger.log('Login Successful for user:', auth.uid);\n\t   * }, function(err){\n\t   *  logger.error('Error logging in:', err);\n\t   * });\n\t   */\n\t  twitterAuth() {\n\t    return this.authWithOAuthPopup('twitter');\n\t  }\n\n\t  /** Get account for a user given their uid.\n\t   * @memberOf Fireadmin#\n\t   * @param {String} uid Unique Id for account.\n\t   * @param {Function} onSuccess Function that returns account info once it is loaded. `Optional`\n\t   * @param {Fireadmin~errorCb} onError Function that runs if there is an error. `Optional`\n\t   * @example\n\t   * // Get account for uid: simplelogin:1\n\t   * fa.accountByUid('simplelogin:1', function(account){\n\t   *   logger.log('Account for user with uid: ' + uid + ' is : ', account);\n\t   * }, function(err){\n\t   *    logger.error('Error getting account for ' + uid + ' : ', err);\n\t   * });\n\t   *\n\t   */\n\t  accountByUid(uid) {\n\t\t\treturn new Promise((resolve, reject) => {\n\t\t\t\tthis.ref.child(uid).on('value', (accountSnap) => {\n\t\t      resolve(accountSnap.val());\n\t\t    }, (err) => {\n\t\t      logger.error({description: 'Error getting account by UID.', uid: uid, error: err, func: 'accountByUid', obj: 'Fireadmin'});\n\t\t\t\t\treject(err);\n\t\t    });\n\t\t\t});\n\t  }\n\t  /** Get user account that is associated to a given email.\n\t   * @memberOf Fireadmin#\n\t   * @param {String} email - Email of account to retreive.\n\t   * @param {Fireadmin~accountByEmailCb} onSuccess - Function that returns account info once it is loaded. `Optional`\n\t   * @param {Fireadmin~errorCb} onError - Function that runs if there is an error. `Optional`\n\t   * @example\n\t   * fa.accountByEmail('test@test.com', function(account){\n\t   *   logger.log('Account loaded:' + account);\n\t   * }, function(err){\n\t   *  logger.error('Error getting account by email:', err);\n\t   * });\n\t   *\n\t   */\n\t  accountByEmail(email) {\n\t    if (email && typeof email == 'string') {\n\t      return this.ref.child('users').orderByChild('email').equalTo(email).on('value', (querySnapshot) => {\n\t        logger.log('accountByEmail returned:', querySnapshot.val());\n\t\t\t\t\treturn Promise.resolve(querySnapshot.val());\n\t      }, (err) => {\n\t        logger.error('Error getting account by email:', err);\n\t\t\t\t\treturn Promise.reject(err);\n\t      });\n\t    } else {\n\t\t\t\treturn Promise.reject({message: 'Email is required to get account.'});\n\t    }\n\t  }\n\t  /**\n\t   * Success callback for accountByEmail function that returns the account associated with a provided email.\n\t   * @callback Fireadmin~accountByEmailCb\n\t   * @param {Object} account Account associated with provided email.\n\t   * @param {String} account.email Email associated with account.\n\t   * @param {String} account.createdAt UTC Time when the account was created.\n\t   */\n\n\t  /** Start presence management for a specificed user uid. This function is used within Fireadmin login functions.\n\t   * @memberOf Fireadmin#\n\t   * @param {String} uid Unique Id for user that for which presence is being setup.\n\t   * @example\n\t   * fa.setupPresence('simplelogin:1');\n\t   *\n\t   */\n\t  setupPresence(uid) {\n\t    logger.log({description: 'setupPresence called', uid: uid, func: 'setupPresense', obj: 'Fireadmin'});\n\t    var amOnline = this.ref.child('.info/connected');\n\t    var onlineRef = this.ref.child('presence').child(uid);\n\t    var sessionsRef = this.ref.child('sessions');\n\t    var userRef = this.ref.child('users').child(uid);\n\t    var userSessionRef = this.ref.child('users').child(uid).child('sessions');\n\t    var pastSessionsRef = userSessionRef.child('past');\n\t    return amOnline.on('value', (snapShot) => {\n\t      if (snapShot.val()) {\n\t        //user is online\n\t        var onDisconnectRef = this.ref.onDisconnect();\n\t        // add session and set disconnect\n\t        var session = sessionsRef.push({began: Firebase.ServerValue.TIMESTAMP, user: uid});\n\t        var endedRef = session.child('ended');\n\t        endedRef.onDisconnect().set(Firebase.ServerValue.TIMESTAMP);\n\t        //add correct session id to user\n\t        // adding session id to current list under user's session\n\t        var currentSesh = userSessionRef.child('current').push(session.key());\n\t        // Remove session id from users current session folder\n\t        currentSesh.onDisconnect().remove();\n\t        // remove from presence list\n\t        onlineRef.set(true);\n\t        onlineRef.onDisconnect().remove();\n\t        // Add session id to past sessions on disconnect\n\t        // pastSessionsRef.onDisconnect().push(session.key());\n\t        // Do same on unAuth\n\t        this.onAuth((authData) => {\n\t          if (!authData) {\n\t            endedRef.set(Firebase.ServerValue.TIMESTAMP);\n\t            currentSesh.remove();\n\t            onlineRef.remove();\n\t          }\n\t        });\n\t      }\n\t    });\n\t  }\n\t  /** Get a firebase reference for a path in array | string form\n\t   *\n\t   * @memberOf Fireadmin#\n\t   * @param {String|Array} path relative path to the root folder in Firebase instance\n\t   * @returns A Firebase instance\n\t   * @example\n\t   * //Array as path\n\t   * var userRef = fa.fbRef(['users', uid]);\n\t   */\n\t  fbRef(path) {\n\t    var ref = this.ref;\n\t    var args = Array.prototype.slice.call(arguments);\n\t    if (args.length) {\n\t      //[TODO] Have this return a Fireadmin object\n\t      ref = ref.child(pathRef(args));\n\t    }\n\t    return ref;\n\t  }\n\t};\n\t/**\n\t\t* Extracts an app name out of a Firebase url\n\t\t* @function AppNameFromUrl\n\t\t* @param {String} authData Login data of new user\n\t\t* @returns {String} appName App name extracted from url\n\t\t*/\n\t function AppNameFromUrl(url) {\n\t\t //remove https:// from beginging and .firebaseio.com from the end\n\t\t return url.match(/^(?:https?|ftp)?:\\/\\/([A-Za-z0-9\\-]{0,61}[A-Za-z0-9])?/)[1];\n\t }\n\t /** Makes a post request to the Fireadmin API\n\t\t* @function apiRequest\n\t\t* @param {String} path - Path of request within api. `Required`\n\t\t* @param {Object} data - Data to include in post request. `Required`\n\t\t* @param {Function} onSuccess Function that runs when request has completed successfully. `Optional`\n\t\t* @param {Fireadmin~errorCb} onError Function that runs if there is an error. `Optional`\n\t\t* @example\n\t\t* // Request to /upload with image object\n\t\t* apiRequest('upload', {img:imgObj}, function(res){\n\t\t*  console.log('Api request to upload completed successfully', res);\n\t\t* }, function(err){\n\t\t*  console.error('Error requesting to upload:', err);\n\t\t* });\n\t\t*/\n\t function apiRequest(reqLocation, reqData, successCb, errorCb) {\n\t\t console.log('apiRequest sending to ' + reqUrl + ' ...');\n\t\t //goog.net.XhrIo.send(url, callback, method, content, headers)\n\t\t//  goog.net.XhrIo.send(reqUrl, function(e){\n\t\t// \t if(e.target.isComplete() && e.target.isSuccess()){\n\t\t// \t\t var res = e.target.getResponse();\n\t\t// \t\t console.log('apiRequest responded:', res);\n\t\t// \t\t //Check for existance of response, that it has content, and that content contains a property 'url'\n\t\t// \t\t if(res){\n\t\t// \t\t\t //Save image object to firebase that includes new image url\n\t\t// \t\t\t handleCb(successCb, res);\n\t\t// \t\t } else {\n\t\t// \t\t\t console.error('Server error');\n\t\t// \t\t\t handleCb(errorCb, {code:'SERVER_ERROR'});\n\t\t// \t\t }\n\t\t// \t } else {\n\t\t// \t\t handleCb(errorCb, e.target.getLastError());\n\t\t// \t }\n\t\t//  }, 'POST', reqData);\n\t }\n\t /** Create a new user profile under 'users'\n\t\t* @function createUserProfile\n\t\t* @param {Object} authData - Login data of new user. `Required`\n\t\t* @param {Reference} ref - Main reference to create profile on. `Required`\n\t\t* @param {Function} onSuccess - Function that runs when profile has been created sucessfully. `Optional`\n\t\t* @param {Fireadmin~errorCb} - onError Function that runs if there is an error. `Optional`\n\t\t* @example\n\t\t* // Create a new user profile\n\t\t* createUserProfile({email:test@test.com, password:'testtest'}, fa.ref, function(auth){\n\t\t*  console.log('Profile created successfully for user:', auth.uid);\n\t\t* }, function(err){\n\t\t*  console.error('Error creating user profile:', err);\n\t\t* });\n\t\t*/\n\t function createUserProfile(authData, ref) {\n\t\t console.log('createUserAccount called:', arguments);\n\t\t var userRef = ref.child('users').child(authData.uid);\n\t\t var userObj = {role: 10, provider: authData.provider};\n\t\t if (authData.provider == 'password') {\n\t\t\t userObj.email = authData.password.email;\n\t\t } else {\n\t\t\t console.log('create 3rd party linked profile:', authData);\n\t\t\t _.extend(userObj, authData);\n\t\t }\n\t\t //Check if account with given email already exists\n\t\t return ref.child('users').orderByChild('email').equalTo(userObj.email).on('value', (userQuery) => {\n\t\t\t if (!userQuery.val()) {\n\t\t\t\t //Account with given email does not already exist\n\t\t\t\t userRef.once('value', (userSnap) => {\n\t\t\t\t\t if (userSnap.val() == null || userSnap.hasChild('sessions')) {\n\t\t\t\t\t\t userObj.createdAt = Firebase.ServerValue.TIMESTAMP;\n\t\t\t\t\t\t // [TODO] Add check for email before using it as priority\n\t\t\t\t\t\t return userRef.setWithPriority(userObj, userObj.email, (err) => {\n\t\t\t\t\t\t\t if (!err) {\n\t\t\t\t\t\t\t\t console.log('New user account created:', userSnap.val());\n\t\t\t\t\t\t\t\t return Promise.resolve(userSnap.val());\n\t\t\t\t\t\t\t } else {\n\t\t\t\t\t\t\t\t return Promise.reject({message: 'Error creating user profile'});\n\t\t\t\t\t\t\t }\n\t\t\t\t\t\t });\n\t\t\t\t\t } else {\n\t\t\t\t\t\t console.error('User account already exists', userSnap.val());\n\t\t\t\t\t\t return Promise.reject(userSnap.val());\n\t\t\t\t\t }\n\t\t\t\t });\n\t\t\t } else {\n\t\t\t\t // console.warn('Account already exists. Session must have been added already:', JSON.stringify(userQuery.val()));\n\t\t\t\t // successCb(userQuery.val());\n\t\t\t\t var error = {message: 'This email has already been used to create an account', account: JSON.stringify(userQuery.val()), status: 'ACCOUNT_EXISTS'};\n\t\t\t\t return Promise.reject(error);\n\t\t\t }\n\t\t }, function(err) {\n\t\t\t //Error querying for account with email\n\t\t\t return Promise.reject(err);\n\t\t });\n\t };\n\n\treturn Fireadmin;\n\n}));"],"sourceRoot":"/source/"}
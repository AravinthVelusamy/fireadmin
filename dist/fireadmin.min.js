!function(a){function b(a){if("undefined"==typeof a||"string"!=typeof a)throw new Error("Url is required to use FireAdmin");return this=new Firebase(a),this.fbUrl=a,this}function c(){{var b="2.1.2";d(a.Firebase.SDK_VERSION),d(b)}if("undefined"==typeof a.Firebase)throw new Error("Firebase is required to use FireAdmin")}function d(a){return a.replace(".","").replace(".","")}function e(a,b){return a&&"function"==typeof a?b?a(b):a():void 0}c(),b.prototype.createObject=function(a,b,c,d){var f=this.getAuth();f&&(b.author=f.uid),b.createdAt=Date.now();var g=this.child(a).push(b,function(a){a?e(d,a):e(c,g)})},b.prototype.emailAuth=function(a,b,c){var d=this;d.authWithPassword(a,function(a,f){null===a?(d.setupPresence(f.uid),e(b,f)):e(c,a)})},b.prototype.setupPresence=function(a){{var b=this,c=b.child(".info/connected"),d=b.child("presense").child(a),e=b.child("sessions"),f=(b.child("users").child(a),b.child("users").child(a).child("sessions"));f.child("past")}c.on("value",function(c){if(c.val()){var g=(b.onDisconnect(),e.push({began:Firebase.ServerValue.TIMESTAMP,user:a})),h=g.child("ended");h.onDisconnect().set(Firebase.ServerValue.TIMESTAMP);var i=f.child("current").push(g.key());i.onDisconnect().remove(),d.set(!0),d.onDisconnect().remove(),b.onUnAuth(function(){h.set(Firebase.ServerValue.TIMESTAMP),i.remove(),d.remove()})}})},b.prototype.accountById=function(a,b,c){this.child(a).on("value",function(a){e(b,a.val())},function(a){e(c,a)})},b.prototype.accountByEmail=function(a,b,c){a&&"string"==typeof a?this.child("users").orderByChild("email").equalTo(a).on("value",function(a){e(b,a.val())},function(a){e(c,a)}):e(c)},b.prototype.onUnAuth=function(a){this.onAuth(function(b){b||e(a)})}}(window,document);